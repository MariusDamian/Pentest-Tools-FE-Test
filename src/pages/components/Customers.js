import React, { useState } from "react";
import customers from "../components/data/customers.json";
import { industrytList, countryList } from "./Filters";
import { Select } from "@chakra-ui/react";

function Customers() {
     const [country, setCountry] = useState("");
     let countryFilter = country !== "" ? customers.filter((customer) => customer.country === country) : customers;

     const [industry, setIndustry] = useState("");
     let industryFilter = industry !== "" ? countryFilter.filter((customer) => customer.industry === industry) : countryFilter;

     return (
          <div className="max-w-7xl mx-auto flex flex-col items-center">
               <h2 className="text-xl  py-20">Browse through all our customers</h2>
               <div className="flex flex-row">
                    <div className="w-60 ml-10 flex flex-col items-start">
                         <p>Country</p>
                         <Select placeholder="All countries" value={country} onChange={(e) => setCountry(e.target.value)} className="">
                              {countryList.map((countryFilter, index) => (
                                   <option className="" key={index} value={countryFilter}>
                                        {countryFilter}
                                   </option>
                              ))}
                         </Select>
                    </div>
                    <div className="w-60 mx-5 flex flex-col items-start">
                         <p>Industry</p>
                         <Select placeholder="All industries" value={industry} onChange={(e) => setIndustry(e.target.value)}>
                              {industrytList.map((industryFilter, index) => (
                                   <option className="" key={index} value={industryFilter}>
                                        {industryFilter}
                                   </option>
                              ))}
                         </Select>
                    </div>
               </div>
               {industryFilter.length === 0 ? (
                    <div className="mt-16">
                         <p>None of our customers match the selected filters.</p>
                    </div>
               ) : (
                    <div className="flex flex-wrap flex-row items-center justify-center">
                         {industryFilter.map((customer, index) => (
                              <div key={index} className="flex flex-row items-center justify-center w-52 h-24 border border-gray-300 m-5 rounded">
                                   <p className="text-lg">{customer.name}</p>
                              </div>
                         ))}
                    </div>
               )}
          </div>
     );
}

export default Customers;
