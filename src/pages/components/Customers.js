import React, { useState } from "react";
import customers from "../components/data/customers.json";
import { industrytList, countryList } from "./Filters";
import { Select } from "@chakra-ui/react";
import Fade from "react-reveal/Fade";

function Customers() {
     const [country, setCountry] = useState("");
     let countryFilter = country !== "" ? customers.filter((customer) => customer.country === country) : customers;

     const [industry, setIndustry] = useState("");
     let industryFilter = industry !== "" ? countryFilter.filter((customer) => customer.industry === industry) : countryFilter;

     let customersList = industryFilter.sort(function (a, b) {
          return b.relevance - a.relevance;
     });

     console.table(
          customers.sort(function (a, b) {
               return a.name - b.name;
          })
     );

     return (
          <div className="max-w-7xl mx-auto flex flex-col items-center border-b">
               <h2 className="pb-10 lg:text-3xl text-xl font-bold text-gray-900 tracking-tight lg:max-w-lg max-w-[200px]">Browse through all our customers</h2>
               <div className="flex lg:flex-row flex-col">
                    <div className="w-60 lg:ml-10 flex flex-col items-start">
                         <p className="pl-1">Country</p>
                         <Select placeholder="All countries" value={country} onChange={(e) => setCountry(e.target.value)} className="">
                              {countryList.map((countryFilter, index) => (
                                   <option className="" key={index} value={countryFilter}>
                                        {countryFilter}
                                   </option>
                              ))}
                         </Select>
                    </div>
                    <div className="w-60 lg:mx-5 flex flex-col items-start">
                         <p className="pl-1">Industry</p>
                         <Select placeholder="All industries" value={industry} onChange={(e) => setIndustry(e.target.value)}>
                              {industrytList.map((industryFilter, index) => (
                                   <option className="" key={index} value={industryFilter}>
                                        {industryFilter}
                                   </option>
                              ))}
                         </Select>
                    </div>
               </div>
               {customersList.length === 0 ? (
                    <div className="my-16 bg-white text-gray-700 px-20 py-10 text-lg rounded-md shadow-xl border border-gray-200">
                         <p>None of our customers match the selected filters.</p>
                    </div>
               ) : (
                    <ol className="mx-auto grid grid-cols-2 gap-5 px-5 py-10 sm:px-6 md:grid-cols-3 lg:grid-cols-5 lg:p-20 ">
                         {customersList.map((customer, index) => (
                              <Fade big>
                                   <li key={index} className="flex items-center justify-center rounded bg-white shadow-xl border border-gray-200 ">
                                        <img src={`./images/logos/${customer.logo}`} alt={`Logo of ${customer.name} a Pentest-Tools.com customer`} title={`${customer.name} is a Pentest-Tools.com customer`} width="215" height="60" className="h-24 sm:h-36 w-40 sm:w-52 object-scale-down p-4 sm:p-8" />
                                   </li>
                              </Fade>
                         ))}
                    </ol>
               )}
          </div>
     );
}

export default Customers;
